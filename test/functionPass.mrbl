

fn add N1
	addendA N1
	addendB N1
	+ addendA addendB

fn applyBiop N1
	biop N1 & N1 N1
	a N1
	b N1
	biop a b

fn fnSelector N1 & N1 N1
	earlyFn N1 & N1 N1
	lateFn  N1 & N1 N1
	?
		< currentFrame (/ frameLimit 2)
		earlyFn
		lateFn


@enter

state A N1
	applyBiop
		-
		frameLimit
		currentFrame

state B N1
	applyBiop
		fnSelector add *
		currentFrame
		12

next
	?
		< currentFrame frameLimit
		enter
		exit

@.

var frameLimit N1
	20









|fn everyNthFrame match
|	n N1
|	onNthFrame  match
|	offNthFrame match
|	? (% currentFrame n) offNthFrame onNthFrame


|fn timedSwitch match
|	timeLimit N1
|	preTimeLimit  match
|	postTimeLimit match
|	?
|		> frameTime timeLimit
|		postTimeLimit
|		preTimeLimit

|fn randomMatchMaker match & N1 match match
|	a match & N1 match match
|	b match & N1 match match
|	? random a b

|state curMatchMaker match & N1 match match
|	randomMatchMaker everyNthFrame timedSwitch

|state foo N1
|	curMatchMaker 0 1



